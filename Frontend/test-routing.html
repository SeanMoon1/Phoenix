<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë¼ìš°íŒ… ë° ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .test-section {
        background: white;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .test-button {
        background: #ff6b35;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
        text-decoration: none;
        display: inline-block;
      }
      .test-button:hover {
        background: #e55a2b;
      }
      .test-button.secondary {
        background: #6c757d;
      }
      .test-button.secondary:hover {
        background: #5a6268;
      }
      .result {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
        border-left: 4px solid #ff6b35;
      }
      .error {
        border-left-color: #dc3545;
        background: #f8d7da;
      }
      .success {
        border-left-color: #28a745;
        background: #d4edda;
      }
      .route-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 10px;
        margin: 10px 0;
      }
      .route-item {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        border-left: 3px solid #ff6b35;
      }
      .route-path {
        font-weight: bold;
        color: #ff6b35;
      }
      .route-component {
        color: #6c757d;
        font-size: 0.9em;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ§­ ë¼ìš°íŒ… ë° ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸</h1>

    <div class="test-section">
      <h2>1. ì•± ë¼ìš°íŠ¸ êµ¬ì¡° í™•ì¸</h2>
      <p>Phoenix ì•±ì˜ ëª¨ë“  ë¼ìš°íŠ¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤:</p>

      <div class="route-list">
        <div class="route-item">
          <div class="route-path">/</div>
          <div class="route-component">HomePage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/login</div>
          <div class="route-component">LoginPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/register</div>
          <div class="route-component">RegisterPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/auth/callback</div>
          <div class="route-component">AuthCallbackPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/manual</div>
          <div class="route-component">ManualPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/training</div>
          <div class="route-component">TrainingPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/training/fire</div>
          <div class="route-component">FireScenarioPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/training/earthquake</div>
          <div class="route-component">EarthquakeScenarioPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/training/first-aid</div>
          <div class="route-component">EmergencyFirstAidScenarioPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/training/traffic-accident</div>
          <div class="route-component">TrafficAccidentScenarioPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/mypage</div>
          <div class="route-component">MyPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/support</div>
          <div class="route-component">SupportPage</div>
        </div>
        <div class="route-item">
          <div class="route-path">/admin</div>
          <div class="route-component">DashboardPage (Protected)</div>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h2>2. ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸</h2>
      <p>ë‹¤ì–‘í•œ ë¼ìš°íŠ¸ë¡œì˜ ë„¤ë¹„ê²Œì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤:</p>

      <button class="test-button" onclick="testNavigation('/')">
        í™ˆí˜ì´ì§€
      </button>
      <button class="test-button" onclick="testNavigation('/login')">
        ë¡œê·¸ì¸
      </button>
      <button class="test-button" onclick="testNavigation('/register')">
        íšŒì›ê°€ì…
      </button>
      <button class="test-button" onclick="testNavigation('/training')">
        í›ˆë ¨í•˜ê¸°
      </button>
      <button class="test-button" onclick="testNavigation('/mypage')">
        ë§ˆì´í˜ì´ì§€
      </button>
      <button class="test-button" onclick="testNavigation('/support')">
        ê³ ê°ì§€ì›
      </button>
      <button class="test-button secondary" onclick="testNavigation('/admin')">
        ê´€ë¦¬ì (ë³´í˜¸ë¨)
      </button>

      <div id="nav-result" class="result" style="display: none"></div>
    </div>

    <div class="test-section">
      <h2>3. OAuth ì½œë°± ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸</h2>
      <p>Google OAuth ì½œë°± í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤:</p>

      <button class="test-button" onclick="testOAuthCallback()">
        OAuth ì½œë°± ì‹œë®¬ë ˆì´ì…˜
      </button>
      <button class="test-button" onclick="testOAuthError()">
        OAuth ì—ëŸ¬ ì‹œë®¬ë ˆì´ì…˜
      </button>

      <div id="oauth-nav-result" class="result" style="display: none"></div>
    </div>

    <div class="test-section">
      <h2>4. ì¸ì¦ ìƒíƒœë³„ ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸</h2>
      <p>ì¸ì¦ ìƒíƒœì— ë”°ë¥¸ ë¼ìš°íŒ… ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤:</p>

      <button class="test-button" onclick="testAuthenticatedRouting()">
        ì¸ì¦ëœ ì‚¬ìš©ì ë¼ìš°íŒ…
      </button>
      <button class="test-button" onclick="testUnauthenticatedRouting()">
        ë¯¸ì¸ì¦ ì‚¬ìš©ì ë¼ìš°íŒ…
      </button>

      <div id="auth-routing-result" class="result" style="display: none"></div>
    </div>

    <div class="test-section">
      <h2>5. í˜„ì¬ URL ì •ë³´</h2>
      <div id="current-url-info" class="result"></div>
    </div>

    <script>
      // í˜„ì¬ URL ì •ë³´ í‘œì‹œ
      function updateCurrentUrlInfo() {
        const info = {
          'í˜„ì¬ URL': window.location.href,
          ê²½ë¡œ: window.location.pathname,
          'ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°': window.location.search,
          í•´ì‹œ: window.location.hash,
          í˜¸ìŠ¤íŠ¸: window.location.host,
          í”„ë¡œí† ì½œ: window.location.protocol,
        };

        document.getElementById('current-url-info').innerHTML = `
                <strong>í˜„ì¬ ë¸Œë¼ìš°ì € ì •ë³´:</strong><br>
                <pre>${JSON.stringify(info, null, 2)}</pre>
            `;
      }

      function showResult(elementId, message, type = 'info') {
        const element = document.getElementById(elementId);
        element.style.display = 'block';
        element.className = `result ${type}`;
        element.innerHTML = message;
      }

      function testNavigation(path) {
        const fullUrl = `${window.location.origin}${path}`;

        showResult(
          'nav-result',
          `
                <strong>ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸:</strong><br>
                <code>${fullUrl}</code><br><br>
                <strong>ì˜ˆìƒ ë™ì‘:</strong><br>
                â€¢ React Routerê°€ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™<br>
                â€¢ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë¨<br>
                â€¢ ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ì— ì¶”ê°€ë¨<br><br>
                <strong>ì‹¤ì œ í…ŒìŠ¤íŠ¸:</strong> <a href="${fullUrl}" target="_blank">ìƒˆ íƒ­ì—ì„œ ì—´ê¸°</a>
            `,
          'info'
        );
      }

      function testOAuthCallback() {
        const mockToken = 'test_token_123';
        const mockUser = {
          id: 1,
          email: 'test@example.com',
          name: 'í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì',
          userLevel: 1,
          currentTier: 1,
        };

        const callbackUrl = `${
          window.location.origin
        }/auth/callback?token=${mockToken}&user=${encodeURIComponent(
          JSON.stringify(mockUser)
        )}`;

        showResult(
          'oauth-nav-result',
          `
                <strong>OAuth ì½œë°± ì‹œë®¬ë ˆì´ì…˜:</strong><br>
                <code>${callbackUrl}</code><br><br>
                <strong>ì˜ˆìƒ ë™ì‘:</strong><br>
                1. AuthCallbackPage ì»´í¬ë„ŒíŠ¸ ë Œë”ë§<br>
                2. URL íŒŒë¼ë¯¸í„°ì—ì„œ í† í°ê³¼ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ<br>
                3. ì¸ì¦ ìŠ¤í† ì–´ì— ìƒíƒœ ì €ì¥<br>
                4. /dashboardë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸<br><br>
                <strong>ì‹¤ì œ í…ŒìŠ¤íŠ¸:</strong> <a href="${callbackUrl}" target="_blank">ìƒˆ íƒ­ì—ì„œ ì—´ê¸°</a>
            `,
          'success'
        );
      }

      function testOAuthError() {
        const errorUrl = `${window.location.origin}/auth/callback?error=google_auth_failed`;

        showResult(
          'oauth-nav-result',
          `
                <strong>OAuth ì—ëŸ¬ ì‹œë®¬ë ˆì´ì…˜:</strong><br>
                <code>${errorUrl}</code><br><br>
                <strong>ì˜ˆìƒ ë™ì‘:</strong><br>
                1. AuthCallbackPage ì»´í¬ë„ŒíŠ¸ ë Œë”ë§<br>
                2. ì—ëŸ¬ íŒŒë¼ë¯¸í„° ê°ì§€<br>
                3. /login?error=google_auth_failedë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸<br>
                4. ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ<br><br>
                <strong>ì‹¤ì œ í…ŒìŠ¤íŠ¸:</strong> <a href="${errorUrl}" target="_blank">ìƒˆ íƒ­ì—ì„œ ì—´ê¸°</a>
            `,
          'error'
        );
      }

      function testAuthenticatedRouting() {
        showResult(
          'auth-routing-result',
          `
                <strong>ì¸ì¦ëœ ì‚¬ìš©ì ë¼ìš°íŒ…:</strong><br><br>
                <strong>ì ‘ê·¼ ê°€ëŠ¥í•œ ë¼ìš°íŠ¸:</strong><br>
                â€¢ /dashboard (ë©”ì¸ ëŒ€ì‹œë³´ë“œ)<br>
                â€¢ /training (í›ˆë ¨ í˜ì´ì§€)<br>
                â€¢ /mypage (ë§ˆì´í˜ì´ì§€)<br>
                â€¢ /support (ê³ ê°ì§€ì›)<br><br>
                <strong>ì ‘ê·¼ ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ëŠ” ë¼ìš°íŠ¸:</strong><br>
                â€¢ /login â†’ /dashboard<br>
                â€¢ /register â†’ /dashboard<br><br>
                <strong>ë³´í˜¸ëœ ë¼ìš°íŠ¸:</strong><br>
                â€¢ /admin (ê´€ë¦¬ì ê¶Œí•œ í•„ìš”)
            `,
          'success'
        );
      }

      function testUnauthenticatedRouting() {
        showResult(
          'auth-routing-result',
          `
                <strong>ë¯¸ì¸ì¦ ì‚¬ìš©ì ë¼ìš°íŒ…:</strong><br><br>
                <strong>ì ‘ê·¼ ê°€ëŠ¥í•œ ë¼ìš°íŠ¸:</strong><br>
                â€¢ / (í™ˆí˜ì´ì§€)<br>
                â€¢ /login (ë¡œê·¸ì¸)<br>
                â€¢ /register (íšŒì›ê°€ì…)<br><br>
                <strong>ì ‘ê·¼ ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ëŠ” ë¼ìš°íŠ¸:</strong><br>
                â€¢ /dashboard â†’ /login<br>
                â€¢ /training â†’ /login<br>
                â€¢ /mypage â†’ /login<br>
                â€¢ /admin â†’ /login<br><br>
                <strong>OAuth ì½œë°±:</strong><br>
                â€¢ /auth/callback (ì¸ì¦ ì²˜ë¦¬ í›„ /dashboardë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸)
            `,
          'info'
        );
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ URL ì •ë³´ ì—…ë°ì´íŠ¸
      window.onload = function () {
        updateCurrentUrlInfo();
      };

      // URL ë³€ê²½ ì‹œ ì •ë³´ ì—…ë°ì´íŠ¸
      window.addEventListener('popstate', updateCurrentUrlInfo);
    </script>
  </body>
</html>
